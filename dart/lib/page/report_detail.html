<core-drawer-panel id="mainFrame">
    <core-header-panel main mode="waterfall">
    	<core-toolbar>
			<paper-icon-button icon="arrow-back" ng-click="back()"></paper-icon-button>
			
      		<span flex>Report Detail</span>
      		
            <div id="more-menu" ng-if="moreMenu != null">
                <paper-icon-button icon="more-vert" ng-click="moreMenu.dropdown.toggle()"></paper-icon-button>
                <core-dropdown halign="right"">
                    <div class="menu">
                        <paper-item class="publish" ng-click="moreMenu.publish()"><core-icon icon="send"></core-icon>Publish{{ moreMenu.published ? " Again" : "" }}</paper-item>
                        <paper-item class="delete" ng-click="moreMenu.delete()"><core-icon icon="delete"></core-icon>Delete</paper-item>
                    </div>
                </core-dropdown>
                
                <confirm-dialog setter="moreMenu.confirmDialog"></confirm-dialog>
                
                <paper-toast class="capsule"></paper-toast>
            </div>
            
   		</core-toolbar>
        
		<div>
			<div class="page-loading" ng-if="report == null">
				<div>
					<paper-spinner active></paper-spinner>
				</div>
			</div>
			<div id="base" ng-if="report != null">
		    	<div id="dateAt">
		    		<p>{{ report.dateAt | date:"EEE, MMM d, yyyy, 'about' h a" }}</p>
		    	</div>
                <div id="rating">
                    <rating stars="stars" space="0.5"></rating>
                </div>
		    	
		    	<div id="comment">
                    <paper-input-decorator label="NO COMMENT">
                        <paper-autogrow-textarea>
                            <textarea ng-model="report.comment" ng-change="onChanged()"></textarea>
                        </paper-autogrow-textarea>
                    </paper-input-decorator>
		    	</div>
                
                <div id="amazon">
                    <infinite-scroll pager="amazon.relations" page-size="{{ amazon.pageSize }}" direction="row">
                        <div id="content">
                            <div class="item" style="width: {{ amazon.itemWidth }}px" ng-repeat="item in amazon.relations.list">
                                <div class="row">
                                    <div class="image">
                                        <fit-image width="100" height="100" shrink="true" url="item.image"></fit-image>
                                    </div>
                                    <div class="column wide">
                                        <div class="title">
                                            <p class="long">{{ item.title }}</p>
                                        </div>
                                        <div class="price">
                                            <p>{{ item.price }}</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <paper-ripple fit ng-click="openItem($event, item)"></paper-ripple>
                            </div>
                        </div>
                    </infinite-scroll>
                </div>
                
                <div id="photo">
                    <showcase setter="showcase" list="report.leaves" reportId="report.id" on-changed="onChanged"></showcase>
                </div>
			</div>
		</div>
	</core-header-panel>
</core-drawer-panel>
